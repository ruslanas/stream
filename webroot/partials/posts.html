<div data-ng-controller="PostsController as app">

    <div class="navbar bavbar-default">
        
        <button ng-disabled="app.showForm"
                ng-click="app.showForm = true"
                class="btn btn-xs btn-primary navbar-btn"><i class="glyphicon glyphicon-plus"></i> New message</button>


    </div>

    <form ng-show="app.showForm" class="jumbotron">
        <div class="form-group">
            <label>Title</label>
            <input class="form-control" ng-model="post.title"/>
        </div>
        <div class="form-group">
            <label>Body</label>
            <textarea rows="7" class="form-control" ng-model="post.body"></textarea>
        </div>
        <button class="btn btn-xs btn-success" ng-click="app.create(post)">Save</button>
    </form>

    <div ng-repeat="post in app.posts">
        <div class="panel panel-info" ng-show="!post.edit">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-md-7"><strong><a href="/posts/edit/{{post.id}}" ng-click="post.edit=true">{{post.title}}</a></strong></div>
                    <div class="col-md-5 text-right">
                        Author: <strong>{{post.user.username}}</strong>
                        @ {{post.created}}
                        <button class="btn btn-xs btn-primary" ng-click="post.edit = true">
                            <i class="glyphicon glyphicon-pencil"></i> Edit</button>
                        <button class="btn btn-xs btn-danger" ng-click="app.delete(post)">
                            <i class="glyphicon glyphicon-remove"></i> Delete</button>
                    </div>
                </div>
            </div>
            <div class="panel-body">{{post.body}}</div>
        </div>

        <form ng-show="post.edit" class="jumbotron">
            <div class="form-group">
                <label>Title</label>
                <input class="form-control" ng-model="post.title"/>
            </div>
            <div class="form-group">
                <label>Body</label>
                <textarea rows="7" class="form-control" ng-model="post.body"></textarea>
            </div>

            <div class="row">
                <div class="col-xs-6">
                    <button ng-show="post.edit" ng-click="app.save(post)"
                            class="btn btn-xs btn-success">Save</button>
                    <button ng-show="post.edit" ng-click="post.edit = false"
                            class="btn btn-xs btn-danger">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>